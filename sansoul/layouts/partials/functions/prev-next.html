{{ $prev := dict }}
{{ $next := dict }}

{{/*  if not first  */}}
{{ if .key }}
  {{ $prev = index .items (sub .key 1) }}
{{ end }}

{{/*  if not last  */}}
{{ if ne (add .key 1) (len .items) }}
  {{ $next = index .items (add .key 1) }}
{{ end }}

{{ return merge .item (dict "prev" $prev "next" $next) }}